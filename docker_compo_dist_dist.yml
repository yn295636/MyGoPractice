version: '3'
services:
  etcd:
    image: "quay.io/coreos/etcd:v3.3.25"
    container_name: "etcd_mygopractice"
    restart: always
    ports:
      - "2379:2379"
      - "2380:2380"
    environment:
      - "ALLOW_NONE_AUTHENTICATION=yes"
      - "ETCD_NAME=${ETCD_NAME}"
      - "ETCD_INITIAL_ADVERTISE_PEER_URLS=http://${IP_ADDR}:2380"
      - "ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380"
      - "ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379"
      - "ETCD_ADVERTISE_CLIENT_URLS=http://${IP_ADDR}:2379"
      - "ETCD_INITIAL_CLUSTER_TOKEN=etcd-cluster-mygopractice"
      - "ETCD_INITIAL_CLUSTER=etcd1=http://192.168.2.200:2380,etcd2=http://192.168.2.201:2380"
      - "ETCD_INITIAL_CLUSTER_STATE=new"
    volumes:
      - "/data/etcd_data:/etcd-data"